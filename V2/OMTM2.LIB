OMTM2
(CURRENT TOOL TEACH - G111)
( BLOCK SKIP ON FOR MULTI INSERT SETTING )
(USES VC81-VC90, VC99, VC100)
(LAST PROVEN 5/4/2022)
(VERSION 2.0 DATE: 4/30/2022 -JDB)
(AFTER EDITING THIS YOU MUST RELOAD INTO MACHINE LIBRARY)

(SET ALL PARAMETERS TO 0)
VC81 = 0
VC82 = 0
VC83 = 0
VC84 = 0
VC85 = 0
VC86 = 0
VC87 = 0
VC88 = 0
VC89 = 0
VC90 = 0
VC99 = 0
VC100 = 0
G4 F1.
VC100 = [VTLCN] (VC100 = CURRENT TOOL NUMBER)



(VERIFY TOOL NO. AND GOTO SET LENGTH/VARIABLES)

IF[VTLCN EQ 1] N1 (NO.6 CENTER DRILL)
IF[VTLCN EQ 2] N1 (N9)
IF[VTLCN EQ 107] N1 (1" KM PLUNGE)
IF[VTLCN EQ 200] N1 (.313 DRILL)
IF[VTLCN EQ 201] N1 (.422 DRILL)
IF[VTLCN EQ 202] N1 (.531 DRILL)
IF[VTLCN EQ 203] N1 (.656 DRILL)
IF[VTLCN EQ 210] N1 (.344 DRILL)
IF[VTLCN EQ 300] N1 (3/8-16 TAP)
IF[VTLCN EQ 301] N1 (1/2-13 TAP)
IF[VTLCN EQ 302] N1 (5/8-11 TAP)
IF[VTLCN EQ 303] N1 (3/4-10 TAP)
IF[VTLCN EQ 310] N1 (1/8-27 NPT)

IF[VTLCN EQ 17] N17 (4.0" APX)
IF[VTLCN EQ 400] N400 (1.0" APX)
IF[VTLCN EQ 401] N401 (1.25" APX)
IF[VTLCN EQ 402] N402 (1.5" APX)
IF[VTLCN EQ 403] N403 (2.0" APX)
IF[VTLCN EQ 404] N404 (2.5" APX)
IF[VTLCN EQ 405] N405 (3.0" APX)
IF[VTLCN EQ 406] N406 (5.0" ASX)
IF[VTLCN EQ 502] N502 (1.5" AJX)
IF[VTLCN EQ 504] N504 (2.5" AJX)
IF[VTLCN EQ 505] N505 (3.0" AJX)

GOTO NALM (INCORRECT TOOL NO.)



(TOOL SET LENGTH AND VARIABLES)

(SINGLE INSERT SET)
(PX = 0 ALWAYS)
(PY = TOOL RADIUS - .100)
(PRS = TOOL ROTATION ANGLE)

(MULTI-SET)
(NO G120)
(INRT = # OF INSERTS)
(PRS = ROT OF 1ST INRT [MUST BE LOWEST NUMBER] )

N1 (CENTER TOOL SET)
M203
GOTO NSTOP

N17 (MULTI-SET/SINGLE)
PX=0 PY=1.9 PRS=40 INRT=8
/G120 PX=PX PY=PY PRS=PRS
/GOTO NSTOP
GOTO NROT

N400 (MULTI-SET/SINGLE)
PX=0 PY=.45 PRS=70 INRT=2
/G120 PX=PX PY=PY PRS=PRS
/GOTO NSTOP
GOTO NROT


N401
G120 PX=0 PY=.575 PRS=195 (OTCH PGM)
GOTO NSTOP

N402
G120 PX=0 PY=.7 PRS=65
GOTO NSTOP

N403 (MULTI-SET/SINGLE)
PX=0 PY=.95 PRS=10 INRT=5
/G120 PX=PX PY=PY PRS=PRS
/GOTO NSTOP
GOTO NROT


N404
G120 PX=0 PY=1.2 PRS=65
GOTO NSTOP

N405
G120 PX=0 PY=1.45 PRS=57
GOTO NSTOP

N406
G120 PX=0 PY=2.5 PRS=40
GOTO NSTOP


N502
G120 PX=0 PY=.45 PRS=67
GOTO NSTOP


N504
G120 PX=0 PY=.95 PRS=90
GOTO NSTOP

N505
G120 PX=0 PY=1.2 PRS=35
GOTO NSTOP



NROT (SAVE MULTIPLE Z HEIGHTS IN VARIABLES)
(ONLY 8 INSERTS AS OF NOW, TO ADD MORE YOU MUST EDIT THIS PGM AND OISRT.LIB)
IF [INRT LT 2] NALM3
IF [INRT GT 8] NALM2 (INRT VALUE TOO LARGE ALARM)

ROT = [ 360 / INRT ]
(1)
G120 PX=PX PY=PY PRS=PRS
VC81 = VTOHT [[VC100],10001] (INSERT HEIGHT = VC81)
(2)
G120 PX=PX PY=PY PRS=[PRS + ROT]
VC82 = VTOHT [[VC100],10001]
IF [INRT EQ 2] NISRT
(3)
G120 PX=PX PY=PY PRS=[PRS + [ROT * 2]]
VC83 = VTOHT [[VC100],10001]
IF [INRT EQ 3] NISRT
(4)
G120 PX=PX PY=PY PRS=[PRS + [ROT * 3]]
VC84 = VTOHT [[VC100],10001]
IF [INRT EQ 4] NISRT
(5)
G120 PX=PX PY=PY PRS=[PRS + [ROT * 4]]
VC85 = VTOHT [[VC100],10001]
IF [INRT EQ 5] NISRT
(6)
G120 PX=PX PY=PY PRS=[PRS + [ROT * 5]]
VC86 = VTOHT [[VC100],10001]
IF [INRT EQ 6] NISRT
(7)
G120 PX=PX PY=PY PRS=[PRS + [ROT * 6]]
VC87 = VTOHT [[VC100],10001]
IF [INRT EQ 7] NISRT
(8)
G120 PX=PX PY=PY PRS=[PRS + [ROT * 7]]
VC88 = VTOHT [[VC100],10001]

NISRT (FIND/SET HIGHEST Z VALUE = CURRENT TOOL HEIGHT)
CALL OISRT (FINDS HIGHEST INSERT AND SETS AS HA, CHECKS VC81-88)
GOTO NSTOP



NALM (WRONG TOOL ALARM)
VUACM[1]='VERIFY TOOL #'
VDOUT[993]=1234

NALM2 (INRT VALUE TOO LARGE ALARM)
VUACM[1]='INRT = TOO LARGE' (INRT GREATER THAN 8, EDIT OMTM2.LIB)
VDOUT[993]=1234

NALM3 (INRT LT 2 ALARM)
VUACM[1]='INRT LESS THAN 2' (USE G120 NOT NROT)
VDOUT[993]=1234



NSTOP
G4 F2.
G30 P1
M1 (TOOL LENGTH = HIGHEST VALUE FROM VC81-VC90)

(CLEAR OUT COMMON VARIABLES)
VC81 = 0
VC82 = 0
VC83 = 0
VC84 = 0
VC85 = 0
VC86 = 0
VC87 = 0
VC88 = 0
VC89 = 0
VC90 = 0
VC99 = 0
VC100 = 0
G30 P1
RTS
